<html ng-app="MyApp">
  <head>
	<link rel="stylesheet" type="text/css" href="stylesheets/style.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.22/angular.js"></script>
	<script src="js/randomColor.js"></script>
	<script src="js/Chart.js"></script>
	<script src="js/redditChart.js"></script>
	<script src="js/chartjs-directive.js"></script>
	<script src="js/controllers.js"></script>
  </head>
<body ng-controller="CloudController as cloud">
	<div class="container">
	
		<p>www.reddit.com/u/<input type="text" ng-model="username">/ <button type="submit" ng-click="createChart(username)">Go</button>
		<button ng-click="colorChart()" ng-show="data&&comments" class="respin">Shuffle Colors</button></p>
		
		<aside ng-show="error" ng-switch="message">
			<div ng-switch-when="red" class="not-a-user red">
				<p>{{user}} is not a reddit user. Please submit a valid username.</p>
			</div>
			<div ng-switch-when="orange" class="not-a-user orange">
				<p>{{user}} hasn't submitted enough comments to graph!</p>
			</div>
		</aside>
		<error ng-hide="errorClass" ng-class="{{errorClass}}" badUser="{{bad-username}}">
			<p>{{message}}</p>
		</error>
		
		<main ng-show="data&&comments&&!error">
			<div ng-app="chartjs-directive">
			  <chart value="myChart"></chart>
			</div>

			<ul id="subreddits">
				<li class="subreddit">all ({{comments.length}})</li>
				<li ng-repeat="sub in data.datasets" style="background-color:{{sub.pointColor}}" class="subreddit">{{sub.label}} ({{sub.total}})</li>
			</ul>

			<ul id="comments">
				<li ng-repeat="comment in comments" class="comment">
					<p>
						<span style="background-color:{{comment.data.color}}" class="subreddit"><a href="http://www.reddit.com/r/{{comment.data.subreddit}}">{{comment.data.subreddit}}:</a></span>
						<a href="{{comment.data.link_url}}">{{comment.data.link_title}}</a>
						<span class="date">{{comment.data.posted}}</span>
					</p>
					<p>{{comment.data.body}}   <a class="perma" href="{{comment.data.link_url+comment.data.id}}">[link]</a></p>
				</li>
			</ul>
			<footer ng-show="data&&comments&&!error">
				<p><a href="">Developed</a> with AngularJS, ChartJS, & SASS</p>
			</footer>
		</main>
	</div>
</body>
</html>